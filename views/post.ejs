<!DOCTYPE html>
<html lang="en">
	<%- include('./partials/head.ejs') %>

<body>

<%- include('./partials/nav.ejs') %>
	<div class="block-post">
		<div class="info">

			<span ><%= post.createdAt.toLocaleDateString() || 'No date' %></span>
			<span ><%= post.author %></span>
		</div>
		<h1 ><%= post.title %></h1>
		
		<p><%= post.text %></p>

		<div class="btns">
			<a href="/edit/<%= post.id %>" class="btn-edit" >
			  <i class="fa-solid fa-pen-to-square"></i>
			<a/>
	  
			<button class="btn-delete" data-id="<%= post.id %>">
			  <i class="fa-solid fa-trash-can" data-id="<%= post.id %>"></i>
			</button>
		 </div>
	</div>

	
	<script>
		document.addEventListener('click', (event) => {
		  const id = event.target?.dataset?.id || null; 
	  
		  if (id) {
			  fetch(`/posts/${id}`, {
				  method: 'DELETE',
		}).then(() => {
			window.location.href = '/posts';
		});
	  }
	  
		});
	  </script>
</body>
</html>